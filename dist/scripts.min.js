var pokemonRepository = function () { var e = []; function n(t) { pokemonRepository.loadDetails(t).then(function () { a(t) }) } function o(t) { e.push(t) } function a(t) { $("h4").html(t.name.charAt(0).toUpperCase() + t.name.slice(1)); var e = $('<img src="' + t.imageUrl + '" class="modal-img">'); $("div.pokemon-img").html(e), $("div.pokemon-height").html("Height: " + t.height), $("div.pokemon-elements").html("Element(s): " + t.types) } return $(document).ready(function () { $(".search").on("keyup", function () { var t = $(this).val().toLowerCase(); $(".pokemon-list button").filter(function () { $(this).toggle(-1 < $(this).text().toLowerCase().indexOf(t)) }) }) }), { add: o, catchAll: function () { return e }, addListItem: function (t) { var e = $(".pokemon-list"), o = $('<button type="button" id="button-style" class="btn btn-primary" data-toggle="modal"  data-target="#pokemon-modal"></button>'); e.append(o), o.text(t.name), o.on("click", function () { n(t) }) }, loadList: function () { return $.ajax("https://pokeapi.co/api/v2/pokemon/?limit=150", { dataType: "json" }).then(function (t) { $.each(t.results, function (t, e) { o({ name: e.name.charAt(0).toUpperCase() + e.name.slice(1), detailsUrl: e.url }) }) }).catch(function (t) { console.error(t) }) }, loadDetails: function (e) { var t = e.detailsUrl; return $.ajax(t).then(function (t) { e.imageUrl = t.sprites.front_default, e.height = t.height, e.types = Object.keys(t.types), 2 === t.types.length ? e.types = [t.types[0].type.name, t.types[1].type.name] : e.types = [t.types[0].type.name] }).catch(function (t) { document.write(t) }) }, showDetails: n, showModal: a } }(); pokemonRepository.loadList().then(function () { pokemonRepository.catchAll().forEach(function (t) { pokemonRepository.addListItem(t) }) });