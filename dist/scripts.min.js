var pokemonRepository = (function() {
  var t = [],
    e = 'https://pokeapi.co/api/v2/pokemon/?limit=150';
  function n(t) {
    pokemonRepository.loadDetails(t).then(function() {
      a(t);
    });
  }
  function o(e) {
    t.push(e);
  }
  function a(t) {
    $('h4').html(t.name.charAt(0).toUpperCase() + t.name.slice(1));
    var e = $('<img src="' + t.imageUrl + '" class="modal-img">');
    $('div.pokemon-img').html(e),
      $('div.pokemon-height').html('Height: ' + t.height),
      $('div.pokemon-elements').html('Element(s): ' + t.types);
  }
  return {
    add: o,
    catchAll: function() {
      return t;
    },
    addListItem: function(t) {
      var e = $('.pokemon-list'),
        o = $(
          '<button type="button" id="button-style" class="btn btn-primary" data-toggle="modal"  data-target="#pokemon-modal"></button>'
        );
      e.append(o),
        o.text(t.name),
        o.on('click', function() {
          n(t);
        });
    },
    loadList: function() {
      return $.ajax(e, { dataType: 'json' })
        .then(function(t) {
          $.each(t.results, function(t, e) {
            o({
              name: e.name.charAt(0).toUpperCase() + e.name.slice(1),
              detailsUrl: e.url
            });
          });
        })
        .catch(function(t) {
          console.error(t);
        });
    },
    loadDetails: function(t) {
      var e = t.detailsUrl;
      return $.ajax(e)
        .then(function(e) {
          (t.imageUrl = e.sprites.front_default),
            (t.height = e.height),
            (t.types = Object.keys(e.types)),
            2 === e.types.length
              ? (t.types = [e.types[0].type.name, e.types[1].type.name])
              : (t.types = [e.types[0].type.name]);
        })
        .catch(function(t) {
          document.write(t);
        });
    },
    showDetails: n,
    showModal: a
  };
})();
pokemonRepository.loadList().then(function() {
  pokemonRepository.catchAll().forEach(function(t) {
    pokemonRepository.addListItem(t);
  });
});
